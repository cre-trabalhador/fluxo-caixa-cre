<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <title>Caixa | Casa de Ora√ß√£o - CRE</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <img src="assets/logo-cre.png" alt="Logo CRE" class="logo">
    <h2 style="text-align: center;">NOSSO CAF√â - CONTROLE DE CAIXA</h2>
    <h3 id="bemvindo"></h3>
<button id="btn-logout" class="btn-sair">Sair</button>

    <div class="accordion">
      <button class="accordion-btn">VER LISTA DE PRODUTOS</button>
      <div class="panel">
        <ul id="lista-produtos"></ul>
      </div>

      <button class="accordion-btn">REGISTRAR VENDA</button>
      <div class="panel">
        <form id="venda-form" class="formulario-venda">
  <label>Produto:<br>
    <input type="text" id="produto" list="lista-produto" required>
    <datalist id="lista-produto"></datalist>
  </label><br>
  <label>Valor (R$):<br>
    <input type="number" id="valor" step="0.01" required>
  </label><br>
  <label>Quantidade:<br>
    <input type="number" id="quantidade" min="1" required>
  </label><br>
  <label>Valor Total (R$):<br>
    <input type="number" id="valor-total" step="0.01" required>
  </label><br>
  <label>Forma de Pagamento:<br>
    <select id="forma">
      <option>Cart√£o D√©bito</option>
      <option>Cart√£o Cr√©dito</option>
      <option>PIX</option>
      <option>Dinheiro</option>
    </select>
  </label><br>
  <button type="submit">Registrar</button>
</form>
<p id="mensagem-sucesso"></p>
      </div>

   <button class="accordion-btn">RELAT√ìRIO DE VENDAS</button>
<div class="panel">
  <!-- RELAT√ìRIO (fica em cima) -->
  <div id="relatorio" class="relatorio"></div>

  <p class="hint">
    Clique para atualizar os registros de venda:
  </p>

  <!-- BOT√ïES (ficam embaixo) -->
  <div class="acoes-relatorio">
    <button id="btn-gerar-relatorio" class="btn-primario">üìä Atualizar Relat√≥rio</button>
    <button id="btn-baixar-pdf" class="btn-primario">üì• Baixar Relat√≥rio (Excel)</button>
  </div>
</div>

<button class="accordion-btn">GERENCIAR PRODUTOS</button>
<div class="panel">
  <form id="form-produto">
    <label>Nome:<br>
      <input type="text" id="nome-produto" required>
    </label><br>
    <label>Pre√ßo (R$):<br>
      <input type="number" id="preco-produto" step="0.01" required>
    </label><br>
    <button type="submit">Adicionar ou Atualizar</button>
  </form>
  <p id="mensagem-produto"></p>
  <h4>Lista de Produtos:</h4>
  
  <!-- Aqui ser√° injetada a tabela -->
  <div id="lista-gerenciar"></div>
</div>

  <!-- Scripts ao final -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script>
  // Protege a rota - s√≥ entra se tiver login salvo
  const usuario = localStorage.getItem("usuario");
  if (!usuario) {
    window.location.href = "login.html"; // volta para tela de login
  }
</script>
  <script src="script.js"></script>
  <script>
  document.getElementById("bemvindo").textContent = `Bem-vindo(a), ${localStorage.getItem("usuario")}!`;
  document.getElementById("btn-logout").addEventListener("click", () => {
    localStorage.removeItem("usuario");
    window.location.href = "login.html";
  });
</script>
</body>
</html>
